---
title: File Upload
description: A drag-and-drop file upload component with paste support and validation.
icon: Upload
---

import { FileUpload } from '@px-ui/core';
import { ComponentPreview } from '../../../src/components/component-preview';

## Overview

The FileUpload component provides a user-friendly interface for uploading files through drag-and-drop, paste, or traditional file browsing. It supports file validation for type, size, and quantity.

## Installation

```bash
npm install @px-ui/core
```

## Import

```tsx
import { FileUpload } from '@px-ui/core';
```

## Usage

### Basic Example

<ComponentPreview>
  <FileUpload onFilesSelect={(files) => console.log(files)} />
</ComponentPreview>

```tsx
<FileUpload onFilesSelect={(files) => console.log(files)} />
```

## Features

The FileUpload component supports three ways to add files:

1. **Drag & Drop**: Drag files directly onto the dropzone
2. **Paste**: Paste files from clipboard (Ctrl/Cmd + V when focused)
3. **Browse**: Click the button to open the native file picker

## Sizes

The FileUpload component comes in three sizes to fit different layouts.

<ComponentPreview>
  <div style={{ display: 'flex', flexDirection: 'column', gap: '24px', width: '100%' }}>
    <FileUpload size="sm" onFilesSelect={(files) => console.log(files)} />
  </div>
</ComponentPreview>

```tsx
<FileUpload size="sm" />
<FileUpload size="default" />
<FileUpload size="lg" />
```

### Small

```tsx
<FileUpload size="sm" />
```

### Default

```tsx
<FileUpload size="default" />
```

### Large

```tsx
<FileUpload size="lg" />
```

## File Type Restrictions

Use the `accept` prop to restrict which file types can be uploaded.

<ComponentPreview>
  <FileUpload 
    accept="image/*,.pdf" 
    onFilesSelect={(files) => console.log(files)}
    onError={(error) => alert(error.message)}
  />
</ComponentPreview>

```tsx
// Accept only images
<FileUpload accept="image/*" />

// Accept images and PDFs
<FileUpload accept="image/*,.pdf" />

// Accept specific formats
<FileUpload accept=".jpg,.png,.gif,.pdf" />
```

## Multiple Files

Enable multiple file selection with the `multiple` prop.

<ComponentPreview>
  <FileUpload 
    multiple 
    onFilesSelect={(files) => console.log(`Selected ${files.length} files`)}
  />
</ComponentPreview>

```tsx
<FileUpload multiple onFilesSelect={(files) => console.log(files)} />
```

## File Size Limit

Set a maximum file size in bytes using the `maxSize` prop.

<ComponentPreview>
  <FileUpload 
    maxSize={5 * 1024 * 1024}
    onFilesSelect={(files) => console.log(files)}
    onError={(error) => alert(error.message)}
  />
</ComponentPreview>

```tsx
// 5MB limit
<FileUpload 
  maxSize={5 * 1024 * 1024} 
  onError={(error) => console.error(error.message)}
/>
```

## Max Files Limit

Limit the number of files that can be selected with `maxFiles`.

<ComponentPreview>
  <FileUpload 
    multiple
    maxFiles={3}
    onFilesSelect={(files) => console.log(files)}
    onError={(error) => alert(error.message)}
  />
</ComponentPreview>

```tsx
<FileUpload 
  multiple 
  maxFiles={3}
  onError={(error) => console.error(error.message)}
/>
```

## Custom Text

Customize the dropzone text and button label.

<ComponentPreview>
  <FileUpload 
    dropzoneText="Drop your images here"
    browseText="Select Images"
    accept="image/*"
    onFilesSelect={(files) => console.log(files)}
  />
</ComponentPreview>

```tsx
<FileUpload 
  dropzoneText="Drop your images here"
  browseText="Select Images"
/>
```

## Disabled State

<ComponentPreview>
  <FileUpload disabled />
</ComponentPreview>

```tsx
<FileUpload disabled />
```

## Error Handling

The `onError` callback receives detailed error information when validation fails.

```tsx
import { FileUpload, type FileUploadError } from '@px-ui/core';

function MyUploader() {
  const handleError = (error: FileUploadError) => {
    switch (error.type) {
      case 'file-too-large':
        console.error('Files too large:', error.files);
        break;
      case 'too-many-files':
        console.error('Too many files selected');
        break;
      case 'invalid-type':
        console.error('Invalid file type:', error.files);
        break;
    }
  };

  return (
    <FileUpload
      accept="image/*"
      maxSize={10 * 1024 * 1024}
      maxFiles={5}
      multiple
      onFilesSelect={(files) => console.log('Valid files:', files)}
      onError={handleError}
    />
  );
}
```

## Complete Example

Here's a complete example with file handling:

```tsx
import { FileUpload, formatFileSize } from '@px-ui/core';
import { useState } from 'react';

function FileUploadExample() {
  const [files, setFiles] = useState<File[]>([]);
  const [error, setError] = useState<string | null>(null);

  return (
    <div>
      <FileUpload
        multiple
        accept="image/*,.pdf,.doc,.docx"
        maxSize={10 * 1024 * 1024} // 10MB
        maxFiles={5}
        onFilesSelect={(newFiles) => {
          setFiles((prev) => [...prev, ...newFiles]);
          setError(null);
        }}
        onError={(err) => setError(err.message)}
      />
      
      {error && (
        <p className="text-ppx-red-5 mt-2">{error}</p>
      )}
      
      {files.length > 0 && (
        <ul className="mt-4 space-y-2">
          {files.map((file, index) => (
            <li key={index} className="flex justify-between">
              <span>{file.name}</span>
              <span className="text-ppx-neutral-10">
                {formatFileSize(file.size)}
              </span>
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}
```

## Props

| Prop | Type | Default | Description |
| --- | --- | --- | --- |
| `size` | `'sm' \| 'default' \| 'lg'` | `'default'` | The size of the dropzone |
| `onFilesSelect` | `(files: File[]) => void` | - | Callback when valid files are selected |
| `accept` | `string` | - | Accepted file types (e.g., `"image/*,.pdf"`) |
| `multiple` | `boolean` | `false` | Allow multiple file selection |
| `maxSize` | `number` | - | Maximum file size in bytes |
| `maxFiles` | `number` | - | Maximum number of files |
| `disabled` | `boolean` | `false` | Disable the upload component |
| `dropzoneText` | `string` | `"Paste Or Drag & Drop Files Here"` | Custom dropzone text |
| `browseText` | `string` | `"Browse for files"` | Custom browse button text |
| `onError` | `(error: FileUploadError) => void` | - | Callback when validation fails |
| `className` | `string` | - | Additional CSS classes |

## FileUploadError Type

```tsx
interface FileUploadError {
  type: 'file-too-large' | 'too-many-files' | 'invalid-type';
  message: string;
  files?: File[];
}
```

## Utility Functions

### formatFileSize

A utility function to format bytes into human-readable file sizes.

```tsx
import { formatFileSize } from '@px-ui/core';

formatFileSize(1024);       // "1 KB"
formatFileSize(1048576);    // "1 MB"
formatFileSize(1073741824); // "1 GB"
```

## Accessibility

- The component is keyboard accessible with Enter/Space to trigger file browsing
- Includes proper ARIA attributes (`role="button"`, `aria-disabled`, `aria-label`)
- Hidden file input is properly accessible to screen readers
- Focus states are clearly visible
- Disabled state prevents all interactions

## Best Practices

- **Provide clear file type guidance**: Use `accept` and communicate allowed types to users
- **Set reasonable size limits**: Prevent server issues with `maxSize` validation
- **Handle errors gracefully**: Use `onError` to show user-friendly error messages
- **Show upload progress**: Combine with Progress component for large file uploads
- **Preview selected files**: Show users what they've selected before upload

